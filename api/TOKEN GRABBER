local redzlib = loadstring(game:HttpGet("https://raw.githubusercontent.com/SrDark222/SH_0001/refs/heads/main/inject%20R.Hub.lua"))()
local Window = redzlib:MakeWindow({
	Title = "T.C.C H4x - MDIM",
	SubTitle = "by DKZIN",
	SaveFolder = "tcc_mdim.lua"
})

Window:AddMinimizeButton({
	Button = { Image = "rbxassetid://10704761835", BackgroundTransparency = 0 },
	Corner = { CornerRadius = UDim.new(0.4, 1) },
})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local MarketplaceService = game:GetService("MarketplaceService")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera

local killTarget, killLoop, killAll, killNearest = "", false, false, false
local viewTarget = false
local espName, espTool, espHP, espSong = false, false, false, false

-- FUNÃ‡ÃƒO PRA ACHAR O MAIS PRÃ“XIMO
local function getNearest()
	local closest, dist = nil, math.huge
	for _, p in pairs(Players:GetPlayers()) do
		if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
			local d = (LocalPlayer.Character.HumanoidRootPart.Position - p.Character.HumanoidRootPart.Position).Magnitude
			if d < dist then
				dist = d
				closest = p
			end
		end
	end
	return closest
end

---------------------------------------
-- ABA: KILL
---------------------------------------
local killTab = Window:MakeTab({"kill", "bomb"})
killTab:AddSection("SELEÃ‡ÃƒO DE ALVO")

killTab:AddTextBox({Name = "ALVO NICK", PlaceholderText = "ex: menorzin", Callback = function(v) killTarget = v end})
local killDropdown = killTab:AddDropdown({Name = "SELECIONAR JOGADOR", Options = {}, Callback = function(v) killTarget = v end})

killTab:AddButton({
	Name = "ATUALIZAR JOGADORES",
	Callback = function()
		local lista = {}
		for _, p in pairs(Players:GetPlayers()) do
			if p ~= LocalPlayer then table.insert(lista, p.Name) end
		end
		for _, m in pairs({"Clear","Add","SetOptions","Update","Set","Refresh"}) do
			pcall(function() if killDropdown[m] then killDropdown[m](killDropdown, lista) end end)
		end
	end
})

killTab:AddButton({
	Name = "TP PARA O ALVO",
	Callback = function()
		local p = Players:FindFirstChild(killTarget)
		if p and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
			LocalPlayer.Character:MoveTo(p.Character.HumanoidRootPart.Position + Vector3.new(0,2,0))
		end
	end
})

killTab:AddToggle({
	Name = "VVISUALIZAR CAMERA DO ALVO",
	Default = false,
	Callback = function(v) viewTarget = v end
})

killTab:AddSection("â˜ OPÃ‡Ã•ES DE ATAQUE")

killTab:AddToggle({Name = "MATAR ALVO", Default = false, Callback = function(v) killLoop = v end})
killTab:AddToggle({Name = "MATAR TODOS", Default = false, Callback = function(v) killAll = v end})
killTab:AddToggle({Name = "MATAR MAIS PRÃ“XIMO", Default = false, Callback = function(v) killNearest = v end})

RunService.RenderStepped:Connect(function()
	if viewTarget and killTarget ~= "" then
		local p = Players:FindFirstChild(killTarget)
		if p and p.Character and p.Character:FindFirstChild("Head") then
			Camera.CameraSubject = p.Character.Head
		end
	else
		Camera.CameraSubject = LocalPlayer.Character:FindFirstChild("Humanoid")
	end
end)

task.spawn(function()
	while true do
		task.wait(0.01)
		if killLoop and killTarget ~= "" then
			pcall(function()
				LocalPlayer.Backpack:WaitForChild("Soco"):WaitForChild("DMG"):FireServer("Damage", killTarget)
			end)
		elseif killAll then
			for _, p in pairs(Players:GetPlayers()) do
				if p ~= LocalPlayer then
					pcall(function()
						LocalPlayer.Backpack:WaitForChild("Soco"):WaitForChild("DMG"):FireServer("Damage", p.Name)
					end)
				end
			end
		elseif killNearest then
			local alvo = getNearest()
			if alvo then
				pcall(function()
					LocalPlayer.Backpack:WaitForChild("Soco"):WaitForChild("DMG"):FireServer("Damage", alvo.Name)
				end)
			end
		end
	end
end)

---------------------------------------
-- ABA: ESP
---------------------------------------
local espTab = Window:MakeTab({"esp", "eye"})
espTab:AddSection("ESP DE JOGADORES")

local espName, espTool, espHP, espSong = false, false, false, false
local MarketplaceService = game:GetService("MarketplaceService")

espTab:AddToggle({ Name = "Nome do Jogador", Default = false, Callback = function(v) espName = v end })
espTab:AddToggle({ Name = "Item Equipado", Default = false, Callback = function(v) espTool = v end })
espTab:AddToggle({ Name = "Vida (%)", Default = false, Callback = function(v) espHP = v end })
espTab:AddToggle({ Name = "Som/MÃºsica", Default = false, Callback = function(v) espSong = v end })

local function criarLinha(gui, texto, cor, pos)
	local label = Instance.new("TextLabel", gui)
	label.Name = "Linha_"..pos
	label.Size = UDim2.new(1, 0, 0, 20)
	label.Position = UDim2.new(0, 0, 0, (pos - 1) * 20)
	label.BackgroundTransparency = 1
	label.Text = texto
	label.TextColor3 = cor
	label.TextStrokeTransparency = 0.2
	label.TextScaled = true
	label.Font = Enum.Font.GothamSemibold
end

local function criarESP(player)
	local head = player.Character and player.Character:FindFirstChild("Head")
	if not head then return end

	local gui = player.Character:FindFirstChild("ESP_INFO")
	if not gui then
		gui = Instance.new("BillboardGui")
		gui.Name = "ESP_INFO"
		gui.Parent = player.Character
		gui.Adornee = head
		gui.Size = UDim2.new(0, 200, 0, 100)
		gui.StudsOffset = Vector3.new(0, 3, 0)
		gui.AlwaysOnTop = true
		gui.MaxDistance = 300
	end
	gui:ClearAllChildren()

	local pos = 1
	if espName then
		criarLinha(gui, player.Name, Color3.fromRGB(255, 255, 255), pos)
		pos += 1
	end
	if espTool then
		local tool = player.Character:FindFirstChildOfClass("Tool")
		local nome = tool and tool.Name or "Sem item"
		criarLinha(gui, nome, Color3.fromRGB(255, 210, 50), pos)
		pos += 1
	end
	if espHP then
		local hum = player.Character:FindFirstChildOfClass("Humanoid")
		if hum then
			local hp = math.floor((hum.Health / hum.MaxHealth) * 100)
			criarLinha(gui, "Vida: "..hp.."%", Color3.fromRGB(255, 100, 100), pos)
			pos += 1
		end
	end
	if espSong then
		for _, obj in ipairs(player.Character:GetDescendants()) do
			if obj:IsA("Sound") and obj.IsPlaying and obj.SoundId:match("%d") then
				local id = obj.SoundId:match("%d+")
				local nome = "Desconhecido"
				pcall(function()
					local info = MarketplaceService:GetProductInfo(tonumber(id))
					nome = info.Name
				end)
				criarLinha(gui, "ðŸŽµ "..nome, Color3.fromRGB(100, 200, 255), pos)
				pos += 1
				criarLinha(gui, "ID: "..id, Color3.fromRGB(200, 200, 200), pos)
				pos += 1

				local hl = Instance.new("Highlight")
				hl.Name = "HighlightSom"
				hl.Parent = obj
				hl.FillTransparency = 1
				hl.OutlineColor = Color3.fromRGB(0, 255, 255)
				hl.OutlineTransparency = 0
				game.Debris:AddItem(hl, 2)
				break
			end
		end
	end
end

RunService.RenderStepped:Connect(function()
	if not (espName or espTool or espHP or espSong) then
		for _, p in pairs(Players:GetPlayers()) do
			if p.Character then
				local gui = p.Character:FindFirstChild("ESP_INFO")
				if gui then gui:Destroy() end
			end
		end
	else
		for _, p in pairs(Players:GetPlayers()) do
			if p ~= LocalPlayer then
				pcall(function() criarESP(p) end)
			end
		end
	end
end)
---------------------------------------
-- ABA: TAG
---------------------------------------
local tagTab = Window:MakeTab({"tags", "tag"})
tagTab:AddSection(" TAG T.C.C")

tagTab:AddToggle({
	Name = "ATIVAR TAG",
	Default = false,
	Callback = function(v)
		local texto = v and "TCC ðŸ‡ªðŸ‡¬" or ""
		local tag = { Color3.new(1, 0, 0), 0, texto }
		game:GetService("ReplicatedStorage"):WaitForChild("RemoteEvent"):WaitForChild("Shop"):WaitForChild("Tag"):FireServer(unpack(tag))
	end
})

---------------------------------------
-- ABA: PARTICULAS
---------------------------------------
local partTab = Window:MakeTab({"particulas", "sparkles"})
partTab:AddSection("EFITOS VISUAIS")

partTab:AddToggle({
	Name = "PARTICULAS T.C.C",
	Default = false,
	Callback = function(state)
		local remote = game:GetService("ReplicatedStorage"):WaitForChild("RemoteEvent"):WaitForChild("Shop"):WaitForChild("Effect")
		if state then
			for i=1,2 do
				remote:FireServer("rbxassetid://100971981026789", 0)
				wait(0.05)
			end
		else
			for i=1,2 do
				remote:FireServer("0", 0)
				wait(0.05)
			end
		end
	end
})

---------------------------------------
-- ABA: INFO
---------------------------------------
local infoTab = Window:MakeTab({"info", "info"})
infoTab:AddSection("ðŸ“œ T.C.C OFICIAL ðŸ‡ªðŸ‡¬")
infoTab:AddDiscordInvite({
	Name = "T.C.C Hub",
	Description = "Cola no servidor pra updates, ajuda e novidades",
	Logo = "rbxassetid://100971981026789",
	Invite = "discord.gg/fjZRjEcpwV"
})
infoTab:AddParagraph({"CREDITOS", "- Dev: DKZIN\n- Hub MDIM Insano\n- T.C.C ðŸ”±"})
