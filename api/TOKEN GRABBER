local redzlib = loadstring(game:HttpGet("https://raw.githubusercontent.com/SrDark222/SH_0001/refs/heads/main/inject%20R.Hub.lua"))()
local Window = redzlib:MakeWindow({
	Title = "T.C.C H4x - MDIM",
	SubTitle = "by DKZIN",
	SaveFolder = "tcc_mdim.lua"
})

Window:AddMinimizeButton({
	Button = { Image = "rbxassetid://10704761835", BackgroundTransparency = 0 },
	Corner = { CornerRadius = UDim.new(0.4, 1) },
})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local MarketplaceService = game:GetService("MarketplaceService")

local killTarget = ""
local killLoop = false
local killAll = false
local killNearest = false
local espActive = false

local function getNearest()
	local closest, dist = nil, math.huge
	for _, p in pairs(Players:GetPlayers()) do
		if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
			local d = (LocalPlayer.Character.HumanoidRootPart.Position - p.Character.HumanoidRootPart.Position).Magnitude
			if d < dist then
				dist = d
				closest = p
			end
		end
	end
	return closest
end

local mdimTab = Window:MakeTab({"menu", "mdim"})
mdimTab:AddSection({"OPÃ‡Ã•ES - MDIM T.C.C"})

mdimTab:AddTextBox({Name = "ALVO NICK", PlaceholderText = "ex: menorzin", Callback = function(v) killTarget = v end})
local killDropdown = mdimTab:AddDropdown({Name = "SELECIONAR JOGADOR", Options = {}, Callback = function(v) killTarget = v end})

mdimTab:AddButton({
	Name = "ATUALIZAR JOGADORES",
	Callback = function()
		local lista = {}
		for _, p in pairs(Players:GetPlayers()) do
			if p ~= LocalPlayer then table.insert(lista, p.Name) end
		end
		for _, m in pairs({"Clear","Add","SetOptions","Update","Set","Refresh"}) do
			pcall(function() if killDropdown[m] then killDropdown[m](killDropdown, lista) end end)
		end
	end
})

mdimTab:AddToggle({
	Name = "MATAR ALVO",
	Default = false,
	Callback = function(v)
		killLoop = v
	end
})

mdimTab:AddToggle({
	Name = "MATAR TODOS",
	Default = false,
	Callback = function(v)
		killAll = v
	end
})

mdimTab:AddToggle({
	Name = "MATAR O MAIS PRÃ“XIMO",
	Default = false,
	Callback = function(v)
		killNearest = v
	end
})

task.spawn(function()
	while true do
		task.wait(0.001)
		if killLoop and killTarget ~= "" then
			local args = {"Damage", killTarget}
			pcall(function()
				LocalPlayer.Backpack:WaitForChild("Soco"):WaitForChild("DMG"):FireServer(unpack(args))
			end)
		elseif killAll then
			for _, p in pairs(Players:GetPlayers()) do
				if p ~= LocalPlayer then
					local args = {"Damage", p.Name}
					pcall(function()
						LocalPlayer.Backpack:WaitForChild("Soco"):WaitForChild("DMG"):FireServer(unpack(args))
					end)
				end
			end
		elseif killNearest then
			local alvo = getNearest()
			if alvo then
				local args = {"Damage", alvo.Name}
				pcall(function()
					LocalPlayer.Backpack:WaitForChild("Soco"):WaitForChild("DMG"):FireServer(unpack(args))
				end)
			end
		end
	end
end)

-- ESP de som com toggle
mdimTab:AddToggle({
	Name = " ESP DE SOM ATIVO",
	Default = false,
	Callback = function(state)
		espActive = state
		if not state then
			for _, v in pairs(workspace:GetDescendants()) do
				if v:IsA("BillboardGui") and v.Name == "RadioInfo" then
					pcall(function() v:Destroy() end)
				end
			end
		end
	end
})

-- ESP loop
task.spawn(function()
	while true do
		task.wait(0.5)
		if not espActive then continue end

		local sonsDetectados = {}
		for _, obj in pairs(workspace:GetDescendants()) do
			if obj:IsA("Sound") and obj.IsPlaying then
				local id = tostring(obj.SoundId):match("%d+")
				local origem = obj.Parent:IsA("BasePart") and obj.Parent or obj:FindFirstAncestorWhichIsA("Model") and obj:FindFirstAncestorWhichIsA("Model"):FindFirstChild("Head")
				if id and origem and not sonsDetectados[origem] then
					local nome = "Desconhecido"
					pcall(function()
						local info = MarketplaceService:GetProductInfo(tonumber(id))
						nome = info.Name
					end)
					local bb = origem:FindFirstChild("RadioInfo")
					if bb then bb:Destroy() end
					local gui = Instance.new("BillboardGui", origem)
					gui.Name = "RadioInfo"
					gui.Size = UDim2.new(0, 200, 0, 40)
					gui.StudsOffset = Vector3.new(0, 3, 0)
					gui.Adornee = origem
					gui.AlwaysOnTop = true

					local text = Instance.new("TextLabel", gui)
					text.Size = UDim2.new(1, 0, 1, 0)
					text.BackgroundTransparency = 1
					text.TextColor3 = Color3.new(1, 1, 1)
					text.TextStrokeTransparency = 0
					text.TextScaled = true
					text.Font = Enum.Font.SourceSansBold
					text.Text = "ðŸŽµ "..nome.."\nðŸ†” "..id
					sonsDetectados[origem] = true
				end
			end
		end

		for _, obj in pairs(workspace:GetDescendants()) do
			if obj:IsA("BillboardGui") and obj.Name == "RadioInfo" and obj.Adornee and not sonsDetectados[obj.Adornee] then
				obj:Destroy()
			end
		end
	end
end)

-- PartÃ­culas novas + tag vermelha
mdimTab:AddButton({
	Name = " SETAR TAG T.C.C + PARTICULAS",
	Callback = function()
		local tag = { Color3.new(1, 0, 0), 1000, "TCC ðŸ‡ªðŸ‡¬" }
		game:GetService("ReplicatedStorage"):WaitForChild("RemoteEvent"):WaitForChild("Shop"):WaitForChild("Tag"):FireServer(unpack(tag))
		for i = 1, 2 do
			local effect = { "rbxassetid://100971981026789", 0 }
			game:GetService("ReplicatedStorage"):WaitForChild("RemoteEvent"):WaitForChild("Shop"):WaitForChild("Effect"):FireServer(unpack(effect))
			task.wait(0.0001)
		end
	end
})

-- Info
local InfoTab = Window:MakeTab({"info", "T.C.C"})
InfoTab:AddSection("T.C.C OFICIAL ðŸ‡ªðŸ‡¬")
InfoTab:AddDiscordInvite({
	Name = "T.C.C Hub",
	Description = "Cola no servidor pra updates, ajuda e novidades",
	Logo = "rbxassetid://18751483361",
	Invite = "discord.gg/fjZRjEcpwV"
})
InfoTab:AddParagraph({"CREDITOS", "- Dev: DKZIN\n- Hub MDIM Insano\n- T.C.C ðŸ”±"})
